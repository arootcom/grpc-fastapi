# От прототипа до продукта вместе с архитектурой. День 1

Этой статьей я открываю повествование о том, как идея от прототипа проходит путь до полноценного продукта при участии архитектуры. Каждая статья оформлена в виде записей об архитектурных решениях ADR (Architecture Decision Records), где каждый этап развития зафиксирован в днях (см. заголовок статьи). 
Все решения будут применяться относительно нереального продукта, но рассматривать будем реальные проблемы с которыми сталкиваются архитекторы и команды разработки. Документация и код доступны в моем репозитории [github](https://github.com/arootcom/grpc-fastapi). 

## Проблема

Разработан [прототип](https://github.com/arootcom/grpc-fastapi/tree/day1), который показал жизнеспособность гипотезы. Реализован на Python, состоит из трех gRPC микросервисов (заказы, резервирование и лояльность) и Fast API оркестратора с последовательным вызовом методов резервирования товаров, применения лояльности и сохранение данных о заказе. [Приложение оркестрации](https://github.com/arootcom/grpc-fastapi/blob/main/docker-compose-singl.yaml) запускает связанные микросервисы как отдельные процессы используя библитеку [asyncio](https://docs.python.org/3/library/asyncio.html) асинхронного программирования. 
Данная реализация подходит под паттерн sidecar, компоненты которого разворачиваются на стороне самого приложения и имеют свой отдельный процесс. Применение этого паттерна обосновано, когда несколько микросервисов требуют общие функции (логирование, мониторинг, безопастность), что позволяет поставлять эти функции в виде котейнеров sidecar упрощая повторное использование.

Это создает следущие проблемы:

1. Потребление дополнительных ресурсов контейнера (CPU, память) - нужно учитывать при планировании
2. Чем больше sidecar микросервисов, тем сложнее поддерживать приложение

## Контекст

Основной сервис общается  

![Component](./day1/deploy-singl.svg)

## Решение

3. Не все задачи стоит решать используя паттерн sidecar - иногда проще вынести в отдельный сервис

## Обоснование

## Последствия


