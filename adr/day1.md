# От прототипа до продукта вместе с архитектурой. День 1

Этой первая статья о том как идея от прототипа проходит путь до полноценного продукта при участии архитектуры. Оформлена она в виде записей архитектурных решений (ADR - Architecture Decision Records), где каждый этап развития зафиксирован в днях (см. заголовок статьи). 
Все решения будут применяться относительно нереального продукта, но рассматриваем реальные проблемы с которыми сталкиваются архитекторы и команды разработки. Документация и код доступны в репозитории [github](https://github.com/arootcom/grpc-fastapi). 

# Один микросервис один контейнер

## Контекст

Разработан [прототип](https://github.com/arootcom/grpc-fastapi/tree/day1) на Python, который состоит из трех gRPC микросервисов (заказы, резервирование и лояльность) и API шлюз с последовательным вызовом методов резервирования товаров, применения лояльности и сохранение данных о заказе. [Приложение](https://github.com/arootcom/grpc-fastapi/blob/main/docker-compose-singl.yaml) запускает связанные микросервисы как отдельные процессы используя библитеку [asyncio](https://docs.python.org/3/library/asyncio.html) асинхронного программирования. 
Все это упаковано в один контейнер. Т.к. микросервисы независимые и их взаимодействие может вызвать сложности, а ошибки в одном сервисе могут потянуть за собой цепочку проблем а других, то это может привести к проблемам маштабируемости, отказоустойчивости, мониторинге и безопастности. 

![Component](./day1/deploy-singl.svg)

## Решение

Каждый микросервис оформить в отдельный контейнер. Это позволит изолировать сервис, обеспечить независимость в развертывании и маштабировании.

1. Минимизация размера. Контейнер содержит только необходимые зависимости и код, что упрощает управление ресурсами.
2. Эффективное масштабирование. Каждый микросервис может быть масштабирован независимо от других, обеспечивая оптимальное распределение нагрузки.
3. Упрощённое обновление и управление. Изменения в одном микросервисе не требуют пересоздания всех контейнеров.
4. Гибкое управление зависимостями и версиями. Различные версии микросервисов могут существовать параллельно, не влияя на работу других сервисов.

## Обоснование

## Последствия


