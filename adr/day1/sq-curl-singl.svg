<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="460px" preserveAspectRatio="none" style="width:1184px;height:460px;" version="1.1" viewBox="0 0 1184 460" width="1184px" zoomAndPan="magnify"><defs><filter height="300%" id="faht3nbfk4ui5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="445.314" style="stroke: #A80036; stroke-width: 1.0;" width="772" x="401.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="770.5" y="17.897">main</text><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="275.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="436" y="115.186"/><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="835" y="326.8341"/><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="965" y="164.598"/><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1100.5" y="245.716"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="30" x2="30" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="440.5" x2="440.5" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="839.5" x2="839.5" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="969.5" x2="969.5" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1105.5" x2="1105.5" y1="63.7739" y2="408.2461"/><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="8" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="15" y="47.672">curl</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="8" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="15" y="429.2121">curl</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="405.5" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="412.5" y="47.672">Fast API</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="405.5" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="412.5" y="429.2121">Fast API</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="781.5" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="788.5" y="47.672">Orders Service</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="781.5" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="788.5" y="429.2121">Orders Service</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="908.5" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="915.5" y="47.672">Reserve Service</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="908.5" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="915.5" y="429.2121">Reserve Service</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1041.5" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1048.5" y="47.672">Loyalties Service</text><rect fill="#FEFECE" filter="url(#faht3nbfk4ui5)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1041.5" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1048.5" y="429.2121">Loyalties Service</text><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="275.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="436" y="115.186"/><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="835" y="326.8341"/><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="965" y="164.598"/><rect fill="#FFFFFF" filter="url(#faht3nbfk4ui5)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1100.5" y="245.716"/><polygon fill="#A80036" points="424,111.186,434,115.186,424,119.186,428,115.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="30" x2="430" y1="115.186" y2="115.186"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="37" y="100.524">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="48" y="91.6709">Создать заказ</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="48" y="109.377">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="84" y="109.377">http://localhost:8080/order?name=test&amp;completed=false</text><polygon fill="#A80036" points="953,160.598,963,164.598,953,168.598,957,164.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="446" x2="959" y1="164.598" y2="164.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="453" y="149.936">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="464" y="141.083">Зыпрос на резервирование</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="464" y="158.789">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="500" y="158.789">localhost:8787 protos.warehouse.ReserveService/ReserveItem</text><polygon fill="#A80036" points="457,192.304,447,196.304,457,200.304,453,196.304" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="451" x2="969" y1="196.304" y2="196.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="463" y="190.495">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="474" y="190.495">результат резервирования</text><polygon fill="#A80036" points="1088.5,241.716,1098.5,245.716,1088.5,249.716,1092.5,245.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="446" x2="1094.5" y1="245.716" y2="245.716"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="453" y="231.054">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="464" y="222.201">Запрос информации о лояльности</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="464" y="239.907">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="500" y="239.907">localhost:8787 protos.loyalties.LoyaltyService/LoyaltyInfo</text><polygon fill="#A80036" points="457,273.4221,447,277.4221,457,281.4221,453,277.4221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="451" x2="1104.5" y1="277.4221" y2="277.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="463" y="271.6131">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="474" y="271.6131">Данные о лояльности</text><polygon fill="#A80036" points="823,322.8341,833,326.8341,823,330.8341,827,326.8341" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="446" x2="829" y1="326.8341" y2="326.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="453" y="312.1721">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="464" y="303.3191">Создать заказ</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="464" y="321.0251">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="323" x="500" y="321.0251">localhost:8787 protos.order.OrderService/CreateOrder</text><polygon fill="#A80036" points="457,354.5401,447,358.5401,457,362.5401,453,358.5401" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="451" x2="839" y1="358.5401" y2="358.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="463" y="352.7311">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="474" y="352.7311">Результат создания заказа</text><polygon fill="#A80036" points="41,386.2461,31,390.2461,41,394.2461,37,390.2461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="440" y1="390.2461" y2="390.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="47" y="384.4371">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="58" y="384.4371">Результат создания заказа</text><!--MD5=[5eb4224e9a91c55d566335d271a03f0e]
@startuml

autonumber

participant curl
box main 
    participant api as "Fast API"
    participant orders as "Orders Service"
    participant reserve as "Reserve Service"
    participant loyalty as "Loyalties Service"
end box

curl -> api : Создать заказ\n**POST** http://localhost:8080/order?name=test&completed=false
activate api

api -> reserve : Зыпрос на резервирование\n**gRPC** localhost:8787 protos.warehouse.ReserveService/ReserveItem
activate reserve
reserve - -> api : результат резервирования
deactivate reserve

api -> loyalty : Запрос информации о лояльности\n**gRPC** localhost:8787 protos.loyalties.LoyaltyService/LoyaltyInfo
activate loyalty
loyalty - -> api : Данные о лояльности
deactivate loyalty

api -> orders : Создать заказ\n**gRPC** localhost:8787 protos.order.OrderService/CreateOrder
activate orders
orders - -> api : Результат создания заказа
deactivate orders

api - -> curl : Результат создания заказа
deactivate api

@enduml

PlantUML version 1.2020.02(Sun Mar 01 13:22:07 MSK 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.9+10-Ubuntu-124.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>