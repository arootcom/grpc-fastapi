<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="460px" preserveAspectRatio="none" style="width:833px;height:460px;" version="1.1" viewBox="0 0 833 460" width="833px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bttk42gy0zzs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="445.314" style="stroke: #A80036; stroke-width: 1.0;" width="79" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="34" y="17.897">gw</text><rect fill="#DDDDDD" height="445.314" style="stroke: #A80036; stroke-width: 1.0;" width="125" x="380" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="421.5" y="17.897">orders</text><rect fill="#DDDDDD" height="445.314" style="stroke: #A80036; stroke-width: 1.0;" width="131" x="507" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="548" y="17.897">reserve</text><rect fill="#DDDDDD" height="445.314" style="stroke: #A80036; stroke-width: 1.0;" width="136" x="640" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="680.5" y="17.897">loyalties</text><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="275.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="38.5" y="115.186"/><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="437.5" y="326.8341"/><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="567.5" y="164.598"/><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="703" y="245.716"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="43" x2="43" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="442" x2="442" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="572" x2="572" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="708" x2="708" y1="63.7739" y2="408.2461"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="804" x2="804" y1="63.7739" y2="408.2461"/><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="8" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="15" y="47.672">Fast API</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="8" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="15" y="429.2121">Fast API</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="384" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="391" y="47.672">Orders Service</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="384" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="391" y="429.2121">Orders Service</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="511" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="518" y="47.672">Reserve Service</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="511" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="518" y="429.2121">Reserve Service</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="644" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="651" y="47.672">Loyalties Service</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="644" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="651" y="429.2121">Loyalties Service</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="782" y="25.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="789" y="47.672">curl</text><rect fill="#FEFECE" filter="url(#f1bttk42gy0zzs)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="782" y="407.2461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="789" y="429.2121">curl</text><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="275.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="38.5" y="115.186"/><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="437.5" y="326.8341"/><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="567.5" y="164.598"/><rect fill="#FFFFFF" filter="url(#f1bttk42gy0zzs)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="703" y="245.716"/><polygon fill="#A80036" points="59.5,111.186,49.5,115.186,59.5,119.186,55.5,115.186" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53.5" x2="803" y1="115.186" y2="115.186"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="65.5" y="100.524">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="76.5" y="91.6709">Создать заказ</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="76.5" y="109.377">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="112.5" y="109.377">http://localhost:8080/order?name=test&amp;completed=false</text><polygon fill="#A80036" points="555.5,160.598,565.5,164.598,555.5,168.598,559.5,164.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48.5" x2="561.5" y1="164.598" y2="164.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="55.5" y="149.936">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="66.5" y="141.083">Зыпрос на резервирование</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="66.5" y="158.789">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="102.5" y="158.789">localhost:8787 protos.warehouse.ReserveService/ReserveItem</text><polygon fill="#A80036" points="59.5,192.304,49.5,196.304,59.5,200.304,55.5,196.304" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="53.5" x2="571.5" y1="196.304" y2="196.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="65.5" y="190.495">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="76.5" y="190.495">результат резервирования</text><polygon fill="#A80036" points="691,241.716,701,245.716,691,249.716,695,245.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48.5" x2="697" y1="245.716" y2="245.716"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="55.5" y="231.054">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="66.5" y="222.201">Запрос информации о лояльности</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="66.5" y="239.907">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="102.5" y="239.907">localhost:8787 protos.loyalties.LoyaltyService/LoyaltyInfo</text><polygon fill="#A80036" points="59.5,273.4221,49.5,277.4221,59.5,281.4221,55.5,277.4221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="53.5" x2="707" y1="277.4221" y2="277.4221"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="65.5" y="271.6131">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="76.5" y="271.6131">Данные о лояльности</text><polygon fill="#A80036" points="425.5,322.8341,435.5,326.8341,425.5,330.8341,429.5,326.8341" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48.5" x2="431.5" y1="326.8341" y2="326.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="55.5" y="312.1721">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="66.5" y="303.3191">Создать заказ</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="66.5" y="321.0251">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="323" x="102.5" y="321.0251">localhost:8787 protos.order.OrderService/CreateOrder</text><polygon fill="#A80036" points="59.5,354.5401,49.5,358.5401,59.5,362.5401,55.5,358.5401" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="53.5" x2="441.5" y1="358.5401" y2="358.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="65.5" y="352.7311">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="76.5" y="352.7311">Результат создания заказа</text><polygon fill="#A80036" points="792,386.2461,802,390.2461,792,394.2461,796,390.2461" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="43.5" x2="798" y1="390.2461" y2="390.2461"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="50.5" y="384.4371">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="61.5" y="384.4371">Результат создания заказа</text><!--MD5=[12c9dabf108f13593d20b456067217fc]
@startuml

autonumber

box gw 
    participant api as "Fast API"
end box
box "orders"
    participant orders as "Orders Service"
end box
box "reserve"
    participant reserve as "Reserve Service"
end box
box loyalties
    participant loyalty as "Loyalties Service"
end box
participant curl

curl -> api : Создать заказ\n**POST** http://localhost:8080/order?name=test&completed=false
activate api

api -> reserve : Зыпрос на резервирование\n**gRPC** localhost:8787 protos.warehouse.ReserveService/ReserveItem
activate reserve
reserve - -> api : результат резервирования
deactivate reserve

api -> loyalty : Запрос информации о лояльности\n**gRPC** localhost:8787 protos.loyalties.LoyaltyService/LoyaltyInfo
activate loyalty
loyalty - -> api : Данные о лояльности
deactivate loyalty

api -> orders : Создать заказ\n**gRPC** localhost:8787 protos.order.OrderService/CreateOrder
activate orders
orders - -> api : Результат создания заказа
deactivate orders

api - -> curl : Результат создания заказа
deactivate api

@enduml

PlantUML version 1.2020.02(Sun Mar 01 13:22:07 MSK 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.9+10-Ubuntu-124.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>