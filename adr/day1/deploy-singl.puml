@startuml

'!theme plain
'skinparam {
'  shadowing false
'  nodesep 50
'  ranksep 100
'  linetype ortho
'}

hide empty members

component curl <<client>> {
}

component grpcurl <<client>> {
}

cloud docker as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/docker-compose-singl.yaml docker-compose-single]]" <<docker>> {
    interface local_http as "http\nrest api\nport: 8080"
    curl -(0- local_http

    interface local_grpc as "grpc\nport: 8787" 
    grpcurl -(0- local_grpc

    node main as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/app/main.py main]]" <<container>> {
        interface http as "http\nrest api\nport: 1111"
        local_http #--# http

        interface grpc as "grpc\nport: 50091"
        local_grpc #--# grpc 

        component api as "Fast API" <<first process>> {
        }
        http --# api

        component server as "gRPC Servers" <<asyncio process>> {
        }
        grpc --# server
        grpc -0)- api
    }
}

@enduml
