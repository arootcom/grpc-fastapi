<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="512px" preserveAspectRatio="none" style="width:1018px;height:512px;" version="1.1" viewBox="0 0 1018 512" width="1018px" zoomAndPan="magnify"><defs><filter height="300%" id="f1uum064jmuin7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[5ec7eedd57310648f8059ffb2621ca4b]
cluster docker--><polygon fill="#FFFFFF" filter="url(#f1uum064jmuin7)" points="22,34,32,24,996,24,996,490,986,500,22,500,22,34" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="986" x2="995" y1="34" y2="25"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="986" y1="34" y2="34"/><line style="stroke: #000000; stroke-width: 1.5;" x1="986" x2="986" y1="34" y2="500"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="56" x="477" y="51.9659">«docker»</text><a href="https://github.com/arootcom/grpc-fastapi/blob/day1/docker-compose-singl.yaml" target="_top" title="https://github.com/arootcom/grpc-fastapi/blob/day1/docker-compose-singl.yaml" xlink:actuate="onRequest" xlink:href="https://github.com/arootcom/grpc-fastapi/blob/day1/docker-compose-singl.yaml" xlink:show="new" xlink:title="https://github.com/arootcom/grpc-fastapi/blob/day1/docker-compose-singl.yaml" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="162" x="424" y="71.0339">docker-compose-single</text></a><!--MD5=[a70b0d373322012744ecc119c63f921b]
cluster main--><polygon fill="#FFFFFF" filter="url(#f1uum064jmuin7)" points="46,104,56,94,972,94,972,466,962,476,46,476,46,104" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="962" x2="971" y1="104" y2="95"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="962" y1="104" y2="104"/><line style="stroke: #000000; stroke-width: 1.5;" x1="962" x2="962" y1="104" y2="476"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="468" y="121.9659">«container»</text><a href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/main.py" target="_top" title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/main.py" xlink:actuate="onRequest" xlink:href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/main.py" xlink:show="new" xlink:title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/main.py" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="35" x="487.5" y="141.0339">main</text></a><!--MD5=[7442f3b126ee602ae02566c1a49e158a]
cluster api--><rect fill="#FFFFFF" filter="url(#f1uum064jmuin7)" height="288" style="stroke: #000000; stroke-width: 1.5;" width="437" x="511" y="164"/><rect fill="#FFFFFF" height="10" style="stroke: #000000; stroke-width: 1.5;" width="15" x="928" y="169"/><rect fill="#FFFFFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="926" y="171"/><rect fill="#FFFFFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="926" y="175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="699" y="191.9659">«process»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="701" y="211.0339">Fast API</text><!--MD5=[4ef80439e1ef409f8f3a0ec422262701]
cluster server--><rect fill="#FFFFFF" filter="url(#f1uum064jmuin7)" height="131" style="stroke: #000000; stroke-width: 1.5;" width="417" x="70" y="164"/><rect fill="#FFFFFF" height="10" style="stroke: #000000; stroke-width: 1.5;" width="15" x="467" y="169"/><rect fill="#FFFFFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="465" y="171"/><rect fill="#FFFFFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="465" y="175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="112" x="222.5" y="191.9659">«asyncio process»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="233" y="211.0339">gRPC Servers</text><!--MD5=[7342edd9a184d8607391f4c130efbf01]
entity router--><rect fill="#FEFECE" filter="url(#f1uum064jmuin7)" height="58.1358" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="686" y="221"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="681" y="226"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="681" y="269.1358"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="54" x="700" y="245.9659">«router»</text><a href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/api/order.py" target="_top" title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/api/order.py" xlink:actuate="onRequest" xlink:href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/api/order.py" xlink:show="new" xlink:title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/api/order.py" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="62" x="696" y="265.0339">api.order</text></a><!--MD5=[da2371a1d2fe20f49a5c6d6bb23b3ad4]
entity cli_orders--><rect fill="#FEFECE" filter="url(#f1uum064jmuin7)" height="58.1358" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="527.5" y="378"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="522.5" y="383"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="522.5" y="426.1358"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="540" y="402.9659">«grpc client»</text><a href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/order.py" target="_top" title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/order.py" xlink:actuate="onRequest" xlink:href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/order.py" xlink:show="new" xlink:title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/order.py" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="85" x="537.5" y="422.0339">clients.order</text></a><!--MD5=[24bbc8e31c13bb5e69caf797e22533af]
entity cli_reserve--><rect fill="#FEFECE" filter="url(#f1uum064jmuin7)" height="58.1358" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="668" y="378"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="663" y="383"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="663" y="426.1358"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="687" y="402.9659">«grpc client»</text><a href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/reserve.py" target="_top" title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/reserve.py" xlink:actuate="onRequest" xlink:href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/reserve.py" xlink:show="new" xlink:title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/reserve.py" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="98" x="678" y="422.0339">clients.reserve</text></a><!--MD5=[bb02334cb79bbcc778410a34840761f6]
entity cli_loyalty--><rect fill="#FEFECE" filter="url(#f1uum064jmuin7)" height="58.1358" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="821.5" y="378"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="816.5" y="383"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="816.5" y="426.1358"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="837" y="402.9659">«grpc client»</text><a href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/loyalty.py" target="_top" title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/loyalty.py" xlink:actuate="onRequest" xlink:href="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/loyalty.py" xlink:show="new" xlink:title="https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/loyalty.py" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="91" x="831.5" y="422.0339">clients.loyalty</text></a><!--MD5=[1f8d078c60165442005a4c1581b11ffa]
entity orders--><rect fill="#FEFECE" filter="url(#f1uum064jmuin7)" height="58.1358" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="303" y="221"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="298" y="226"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="298" y="269.1358"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="358.5" y="245.9659">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="313" y="265.0339">servers.services.order</text><!--MD5=[df5f6bf69c9dfc21c325457d01673a6c]
entity reserve--><rect fill="#FEFECE" filter="url(#f1uum064jmuin7)" height="58.1358" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="86.5" y="221"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="81.5" y="226"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="81.5" y="269.1358"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="148.5" y="245.9659">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="161" x="96.5" y="265.0339">servers.services.reserve</text><!--MD5=[5d179c82f0a7f0d3daea9bc754d1b024]
link router to cli_orders--><path d="M685.66,250 C642.18,250 580,250 580,250 C580,250 580,372.84 580,372.84 " fill="none" id="router-&gt;cli_orders" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="580,377.84,584,368.84,580,372.84,576,368.84,580,377.84" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="596" y="325.897">Dependency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="607.5" y="343.603">Injection</text><!--MD5=[86adb3825d75be31d524f4bb8c3b193f]
link router to cli_reserve--><path d="M727,279.16 C727,279.16 727,372.99 727,372.99 " fill="none" id="router-&gt;cli_reserve" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="727,377.99,731,368.99,727,372.99,723,368.99,727,377.99" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="728" y="325.897">Dependency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="739.5" y="343.603">Injection</text><!--MD5=[17a1c6140cd0f20c87742232259138ff]
link router to cli_loyalty--><path d="M768.39,250 C812.78,250 877,250 877,250 C877,250 877,372.84 877,372.84 " fill="none" id="router-&gt;cli_loyalty" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="877,377.84,881,368.84,877,372.84,873,368.84,877,377.84" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="850" y="325.897">Dependency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="861.5" y="343.603">Injection</text><!--MD5=[69bf05c1230ffa15e373f2acf5eb62c3]
@startuml

skinparam {
  linetype ortho
}

node docker as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/docker-compose-singl.yaml docker-compose-single]]" <<docker>> {

    node main as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/app/main.py main]]" <<container>> {


        component api as "Fast API" <<process>> {
            component router as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/app/api/order.py api.order]]" <<router>>

            component cli_orders as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/order.py clients.order]]" <<grpc client>>
            router - -> cli_orders : Dependency\nInjection

            component cli_reserve as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/reserve.py clients.reserve]]" <<grpc client>>
            router - -> cli_reserve : Dependency\nInjection

            component cli_loyalty as "[[https://github.com/arootcom/grpc-fastapi/blob/day1/app/clients/loyalty.py clients.loyalty]]" <<grpc client>>
            router - -> cli_loyalty : Dependency\nInjection
        }

        component server as "gRPC Servers" <<asyncio process>> {
            component orders as "servers.services.order" <<service>>
            component reserve as "servers.services.reserve" <<service>>
        }
    }
}

@enduml

PlantUML version 1.2020.02(Sun Mar 01 13:22:07 MSK 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.9+10-Ubuntu-124.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>